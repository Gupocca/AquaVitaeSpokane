<html>
<head>
	<title>AquaVitae Spokane</title>

  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

	<link rel="stylesheet" type="text/css" href="css/style.css">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link rel="icon" type="image/png" href="favicon.png" />

  <link href='css/smoothness/jquery-ui-1.10.0.custom.min.css' rel='stylesheet' type='text/css'>  

  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBqOmuo3IvBpoAcfmIBRTiV49-JYBnvtsY&sensor=false&libraries=visualization"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery-1.9.0.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="js/jquery-ui-1.10.0.custom.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="db/data.js"></script>

  <script type="text/javascript">
      $(function() {
        $(".radius").slider({
          min: 10,
          max: 80,
          step: 5,
          value: 30
        });
        $(".opacity").slider({
          min: 0.1,
          max: 1,
          step: 0.1,
          value: 0.8
        });

        $("#license-heat").button();
        $("#crime-heat").button();

        var spokaneCenter = new google.maps.LatLng(47.657988,-117.46582);
        var spokaneValley = new google.maps.LatLng(47.657988,-117.34082);

        var liquorLicenseData = getLiquorLicenseData();
        var taxiData = getTempData();

        var gradient_blue = getGradientBlue();
        var gradient_orange = getGradientOrange();

        var mapOptions = {
          center: spokaneValley,
          zoom: 11,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          disableDefaultUI: true
        };

        var map = new google.maps.Map(document.getElementById("mappy"), mapOptions);
        var heatmapLicense = new google.maps.visualization.HeatmapLayer({ data: liquorLicenseData });
        var heatmapCrimes = new google.maps.visualization.HeatmapLayer({ data: taxiData });

        heatmapCrimes.setOptions({ gradient: gradient_orange, radius: 30, opacity: 0.8 });
        heatmapLicense.setOptions({ gradient: gradient_blue, radius: 30, opacity: 0.8 });

        heatmapLicense.setMap(map);
        heatmapCrimes.setMap(map);


        $("#cp").click(function() {
          heatmapLicense.setMap(heatmapLicense.getMap() ? null : map);
        });

        function sliding() {
          
          var val = $(this).slider("value");

          switch ($(this).attr("id"))
          {
            case 'license-opacity':
            heatmapLicense.setOptions({ opacity: val });
            break;

            case 'license-radius':
            heatmapLicense.setOptions({ radius: val });
            break;
          }
        }

        $(".slider").slider({ slide: sliding, change: sliding });

      });
      </script>
</head>

<body onload="initialize()">
  <div id="side-bar">
    
    <h2>filters</h2>


    <h3>licenses</h3>
      <input type="checkbox" id="license-heat" />
      <label for="license-heat" class="heat-label">heatmap</label>

      <label class="slider-label">
        <div class="slider opacity" id="license-opacity"></div>
        opacity
      </label>
      <label class="slider-label">
        <div class="slider radius" id="license-radius"></div>
        radius
      </label>

    <!-- 
      <h3>crimes</h3>
      <input type="checkbox" id="crime-heat" />
      <label for="crime-heat" class="heat-label" id="cp">heatmap</label>

      <label class="slider-label">
        <div class="slider opacity" id="crime-opacity"></div>
        opacity
      </label>
      <label class="slider-label">
        <div class="slider radius" id="crime-radius"></div>
        radius
      </label>
    -->
  </div>
  <div id="mappy"></div>

</body>
</html>